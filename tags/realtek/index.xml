<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Realtek on Memnoth</title>
    <link>https://memnoth.github.io/tags/realtek/</link>
    <description>Recent content in Realtek on Memnoth</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>&amp;copy; 2016 </copyright>
    <lastBuildDate>Mon, 26 Jun 2017 11:53:39 +0900</lastBuildDate>
    <atom:link href="/tags/realtek/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>How to get your Realtek RTL8111/RTL8168 working</title>
      <link>https://memnoth.github.io/2017/06/how-to-get-your-realtek-rtl8111-rtl8168-working/</link>
      <pubDate>Mon, 26 Jun 2017 11:53:39 +0900</pubDate>
      
      <guid>https://memnoth.github.io/2017/06/how-to-get-your-realtek-rtl8111-rtl8168-working/</guid>
      <description>

&lt;p&gt;원문 &amp;ndash; &lt;a href=&#34;https://unixblogger.com/2016/08/11/how-to-get-your-realtek-rtl8111rtl8168-working-updated-guide/&#34; target=&#34;_blank&#34;&gt;How To get your Realtek RTL8111/RTL8168 working&lt;/a&gt; by Unixblogger&lt;br /&gt;
번역 &amp;ndash; Yi Soo, (Thomas) An&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&#34;why-do-i-need-this-driver-anyway&#34;&gt;Why do I need this driver anyway?&lt;/h1&gt;

&lt;p&gt;많은 분들이 제게 &amp;ldquo;이게 왜 필요하죠? 리눅스에서 지원하지 않나요?&amp;hellip;&amp;rdquo; 라고 물어봅니다. 하지만 &lt;code&gt;RTL8111/RTL8168&lt;/code&gt;은 오픈 소스가 아니에요. 이제 왜 리눅스 커널에 포함되지 않는지 아시겠죠?&lt;br /&gt;
그래서 우리가 직접 빌드해야 된답니다.&lt;/p&gt;

&lt;h1 id=&#34;the-installation-methods&#34;&gt;The installation methods&lt;/h1&gt;

&lt;p&gt;Ubuntu/Debian에서 디바이스 드라이버를 컴파일하는 방법에 대해 글을 쓴 이후로 많은 것이 변했습니다. 그래서 오늘은 드라이버를 설치하기 위한 방법 2개를 소개하고자 합니다.&lt;/p&gt;

&lt;h1 id=&#34;the-automatic-way&#34;&gt;The automatic way&lt;/h1&gt;

&lt;p&gt;&lt;em&gt;NOTE: 힌트를 준 &lt;code&gt;Liyu&lt;/code&gt;에게 고마움을 전합니다.&lt;/em&gt;&lt;br /&gt;
&lt;em&gt;NOTE2: 인터넷 연결이 필요합니다. WLAN이나 USB 이더넷 카드를 이용해서 인터넷에 연결해주세요.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Ubuntu와 Debian의 저장소에는 우리가 설치할 드라이버가 포함되어 있습니다. Debian 유저라면 &lt;code&gt;non-free&lt;/code&gt; 패키지 소스를 활성화(Enable) 해야하고 Ubuntu 유저라면 &lt;code&gt;universe&lt;/code&gt; 패키지 소스를 활성화해야 합니다. &lt;em&gt;/etc/apt/sources.list&lt;/em&gt; 를 root 권한과 함께 텍스트 에디터로 열어서 수정해야 합니다.&lt;/p&gt;

&lt;h2 id=&#34;debian-이용자&#34;&gt;Debian 이용자&lt;/h2&gt;

&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;deb http://ftp.de.debian.org/debian/ jessie main contrib
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;위 라인을 다음과 같이 변경하고 저장합니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;deb http://ftp.de.debian.org/debian/ jessie main contrib non-free
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;저장소를 업데이트합니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo apt-get update
&lt;/code&gt;&lt;/pre&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;ubuntu-이용자&#34;&gt;Ubuntu 이용자&lt;/h2&gt;

&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;deb http://de.archive.ubuntu.com/ubuntu/ xenial main restricted
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;위 라인을 다음과 같이 변경하고 저장합니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;deb http://de.archive.ubuntu.com/ubuntu/ xenial main restricted universe
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;저장소를 업데이트합니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo apt-get update
&lt;/code&gt;&lt;/pre&gt;
&lt;/blockquote&gt;

&lt;p&gt;이제 준비가 되었으니 아래 명령어를 이용하여 디바이스 드라이버를 설치합니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo apt-get install r8168-dkms
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;CPU 종류에 따라 디바이스 드라이버를 빌드하는데 소요되는 시간이 있습니다.&lt;br /&gt;
자동화 방법의 장점은 Kernel 업데이트가 생기면 &lt;em&gt;dkms&lt;/em&gt; 에 의해 &lt;code&gt;r8168&lt;/code&gt; 드라이버도 업데이트됩니다. 빌드가 끝나고 이더넷 카드를 사용할 수 있어야 하는데 그렇지 않다면 재부팅합니다.&lt;/p&gt;

&lt;h1 id=&#34;the-manual-way&#34;&gt;The manual way&lt;/h1&gt;

&lt;p&gt;&lt;em&gt;NOTE: Manual 방식은 4.0 이상의 커널에서 테스트되었습니다.&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&#34;1-의존성-설치&#34;&gt;1. 의존성 설치&lt;/h3&gt;

&lt;p&gt;우선 인터넷에 연결되어 있어야 합니다. 물론 필요한 패키지를  Debian/Ubuntu DVD에서 찾을 수도 있습니다.&lt;br /&gt;
의존성 패키지를 설치하기 위해 아래의 명령어를 입력합니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo apt-get install build-essential linux-headers-$(uname -r)
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;2-드라이버-코드-다운로드&#34;&gt;2. 드라이버 코드 다운로드&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;http://www.realtek.com.tw/downloads/downloadsView.aspx?Langid=1&amp;amp;PNid=13&amp;amp;PFid=5&amp;amp;Level=5&amp;amp;Conn=4&amp;amp;DownTypeID=3&amp;amp;GetDown=false#2&#34; target=&#34;_blank&#34;&gt;링크&lt;/a&gt;를 통하여 Realtek 홈페이지에서 공식 드라이버를 받을 수 있습니다. 커널 버전이 4.7 이상이면 &lt;code&gt;LINUX driver for kernel up to 4.7&lt;/code&gt;를 선택하고 아니면 &lt;code&gt;Linux driver for kernel 2.4.x (Support x86 and x64)&lt;/code&gt;를 선택합니다.&lt;/p&gt;

&lt;h3 id=&#34;3-블랙리스트에-r8169-드라이버-추가&#34;&gt;3. 블랙리스트에 r8169 드라이버 추가&lt;/h3&gt;

&lt;p&gt;시스템에 &lt;code&gt;r8168&lt;/code&gt; 드라이버가 없으면 r8169를 사용하게 됩니다. 하지만 RTL8168 이더넷 카드에서 r8169 드라이버는 불안정합니다.&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:1&#34;&gt;1&lt;/a&gt;&lt;/sup&gt; r8169가 로드되는 것을 막기 위하여 블랙리스트를 이용합니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;user@linux:~$ sudo sh -c &#39;echo blacklist r8169 &amp;gt;&amp;gt; /etc/modprobe.d/blacklist.conf&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;4-소스코드-압축해제&#34;&gt;4. 소스코드 압축해제&lt;/h3&gt;

&lt;p&gt;드라이버를 다운로드하고 나서 압축을 풉니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;user@linux:~@ tar xfvj path/to/file.tar.bz2
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;em&gt;NOTE: 소스코드 파일 이름은 다를 수 있으니 주의하세요.&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&#34;5-컴파일-및-설치&#34;&gt;5. 컴파일 및 설치&lt;/h3&gt;

&lt;p&gt;압축해제된 폴더로 이동합니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;user@linux:~$ cd path/to/file
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;이제 스크립트를 이용하여 컴파일 및 설치 과정을 진행합니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;user@linux:~/path/to/file$ sudo ./autorun.sh
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;드라이버 빌드가 끝나고 올바르게 설치되었다면 아래와 같이 출력되어야 합니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Check old driver and unload it.
rmmod r8169
Build the module and install
At main.c:222:
- SSL error:02001002:system library:fopen:No such file or directory: bss_file.c:175
- SSL error:2006D080:BIO routines:BIO_new_file:no such file: bss_file.c:178
sign-file: certs/signing_key.pem: No such file or directory
Backup r8169.ko
rename r8169.ko to r8169.bak
DEPMOD 4.4.0-31-generic
load module r8168
Updating initramfs. Please wait.
update-initramfs: Generating /boot/initrd.img-4.4.0-31-generic
Completed.
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;6-드라이버-확인&#34;&gt;6. 드라이버 확인&lt;/h3&gt;

&lt;p&gt;마지막으로 드라이버가 올바르게 로드되었는지 확인합니다. 어떠한 오류도 없다면 아래와 같이 출력됩니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;user@linux:~$ lsmod | grep r8168
r8168                 491520  0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;이더넷 디바이스에서도 확인해봅니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;user@linux:~$ sudo ethtool -i enp1s0
driver: r8168
version: 8.042.00-NAPI
firmware-version:
expansion-rom-version:
bus-info: 0000:07:00.0
supports-statistics: yes
supports-test: no
supports-eeprom-access: yes
supports-register-dump: yes
supports-priv-flags: no
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;로드되지 않았으면 시스템을 재부팅하고 다시 확인합니다.&lt;/p&gt;

&lt;h1 id=&#34;that-s-it&#34;&gt;That&amp;rsquo;s it&lt;/h1&gt;

&lt;p&gt;이제 Realtek 공식 드라이버를 이용할 준비가 되었습니다. 만약 궁금한 점이나 제안하고 싶은 것이 있다면 댓글로 알려주세요.&lt;/p&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:1&#34;&gt;This means slow download rates, homepages taking hours to load and so on.
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:1&#34;&gt;&lt;sup&gt;^&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
